{% extends "base.html" %}
{% load static staticv wagtailcore_tags wagtailimages_tags %}
{% block body_class %}template-homepage{% endblock %}


{% block content %}

<!-- Navbar -->
{% include 'home/navbar.html' %}
<!-- End of navbar -->

<!-- Page sections -->
<div id="fullpage">

    <!-- Home Section -->
    <div class="section" id="section_home">
        {% image page.gallery_images.first.image fill-2560x1580 as main_image %}
        <div class="home_image_div" style="background-image: url({{ main_image.url }})"></div>
        <div class="home_content_div">
            <h1 class="home_brand">{{ page.title }}</h1>
            <h3 class="home_motto">{{ page.motto }}</h3>
            {{ page.body|richtext }}
            <p class="mt-5">
                <a href="#{{ page.home_sections.first.section.slug }}" class="btn btn-primary mr-1">Learn more</a>
                <button class="btn btn-success demo_request_get_button">Request a demo</button>
            </p>
            {% if user.is_authenticated %}
            <a href="{% url 'clients:list' %}">Registered clients</a>
            {% endif %}
        </div>
    </div>
    <!-- End of home section -->

    <!-- Extra sections -->
    {% for item in page.home_sections.all %}
        {% with section=item.section %}

        <!-- Section start -->
        <div class="section">
            <div class="row section_row">

            {{ section.section }}

            {% if not section.get_children %}

                {# SECTIONS NOT CONTAINING SLIDES #}

                {% if section.align == 'cr' %}

                    <!-- right aligned section -->
                    {% image section.gallery_images.first.image fill-700x800 as section_image %}
                    <div class="col-md-6 img_col_left" style="background-image: url({{ section_image.url }});">
                    </div>
                    <div class="col-md-5 content_col_right">
                        <div class="page_content">
                            <h2 class="title text-galaxy">{{ section.title }}</h2>
                            {{ section.body|richtext }}
                        </div>
                    </div>
                    <!-- End of right aligned section -->

                {% endif %}

                {% if section.align == 'cl' %}
                    <!-- Left aligned section -->
                    <div class="col-md-5 offset-md-1 content_col_left">
                        <div class="page_content">
                            <h2 class="title text-galaxy">{{ section.title }}</h2>
                            {{ section.body|richtext }}
                        </div>
                    </div>
                    {% image section.gallery_images.first.image fill-700x800 as section_image %}
                    <div class="col-md-6 img_col_right" style="background-image: url({{ section_image.url }});">
                    </div>
                    <!-- End of left aligned section -->
                {% endif %}

            {% else %}

                {# SECTIONS CONTAINING SLIDES #}

                <!-- Slide menu -->
                <div class="slide_menu d-none d-lg-block">
                    <ul class="nav justify-content-center" role="tablist">

                    {% for slide in section.get_children %}
                        {% with slide=slide.specific %}

                        <li class="nav-item color-galaxy">
                            <a class="nav-link {% if forloop.first %}active{% endif %}" id="{{ section.slug }}-slide{{ forloop.counter }}" data-menuanchor="{{ section.slug }}/{{ slide.slug }}" href="#{{ section.slug }}/{{ slide.slug }}">{{ slide.title }}</a>
                        </li>

                        {% endwith %}
                    {% endfor %}
                    </ul>
                </div>
                <!-- End of slide menu -->

                <!-- Slides -->
                {% for slide in section.get_children %}
                    {% with slide=slide.specific %}

                    <div class="slide" data-anchor="{{ slide.slug }}">

                        <div class="row slide_row">

                        {% if slide.align == 'cr' %}

                            <!-- right aligned slide -->
                            {% image slide.gallery_images.first.image fill-700x800 as slide_image %}
                            <div class="col-md-5 offset-md-1 img_slide_left" style="background-image: url({{ slide_image.url }});">
                            </div>
                            <div class="col-md-5 content_slide_right">
                                <div class="page_content">
                                    <h2 class="title text-galaxy">{{ slide.title }}</h2>
                                    {{ slide.body|richtext }}
                                </div>
                            </div>
                            <!-- End of right aligned slide -->

                        {% endif %}

                        {% if slide.align == 'cl' %}
                            <!-- Left aligned slide -->
                            <div class="col-md-5 offset-md-1 content_slide_left">
                                <div class="page_content">
                                    <h2 class="title text-galaxy">{{ slide.title }}</h2>
                                    {{ slide.body|richtext }}
                                </div>
                            </div>
                            {% image slide.gallery_images.first.image fill-700x800 as slide_image %}
                            <div class="col-md-5 img_slide_right" style="background-image: url({{ slide_image.url }});">
                            </div>
                            <!-- End of left aligned slide -->
                        {% endif %}

                    </div>
                    </div>

                    {% endwith %}
                {% endfor %}
                <!-- End of slides -->

            {% endif %}

            </div>
        </div>
        <!-- End of section -->

        {% endwith %}
    {% endfor %}
    <!-- End of extra sections -->

</div>
<!-- End of page sections -->

<!-- Modal -->
<div class="modal fade" id="homeModalCenter" tabindex="-1" role="dialog" aria-labelledby="homeModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="homeModalLongTitle">Request a demo</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body"></div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary demo_request_post_btn">Request</button>
      </div>
    </div>
  </div>
</div>

<!-- Page data -->
<div class="page_data" data-anchors="{% for item in page.home_sections.all %}{% with section=item.section.specific %}{{ section.slug }}{% if not forloop.last %}, {% endif %}{% endwith %}{% endfor %}"></div>

{% endblock %}

{% block extra_js %}
    {{ block.super }}
    <script type="text/javascript" src="{% static 'js/phone_codes.js' %}?v={% staticv 'clients/static/js/phone_codes.js' %}"></script>
{% endblock %}
